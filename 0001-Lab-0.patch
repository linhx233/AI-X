From 25e0de307009b370579eea3728accbb6fd309c48 Mon Sep 17 00:00:00 2001
From: linhx233 <linhx23@mails.tsinghua.edu.cn>
Date: Thu, 21 Aug 2025 21:41:57 +0800
Subject: [PATCH 1/3] Lab 0

---
 lab1.sh           | 16 ++++++++++++++++
 network_stats.txt |  7 +++++++
 2 files changed, 23 insertions(+)
 create mode 100755 lab1.sh
 create mode 100755 network_stats.txt

diff --git a/lab1.sh b/lab1.sh
new file mode 100755
index 0000000000..535dfc4678
--- /dev/null
+++ b/lab1.sh
@@ -0,0 +1,16 @@
+#! /bin/bash
+
+./build/NULL/gem5.opt \
+configs/example/garnet_synth_traffic.py \
+--network=garnet --num-cpus=64 --num-dirs=64 \
+--topology=Mesh_XY --mesh-rows=8 \
+--inj-vnet=0 --synthetic=uniform_random \
+--sim-cycles=10000 --injectionrate=0.01 
+
+echo > network_stats.txt
+grep "packets_injected::total" m5out/stats.txt | sed 's/system.ruby.network.packets_injected::total\s*/packets_injected = /' >> network_stats.txt
+grep "packets_received::total" m5out/stats.txt | sed 's/system.ruby.network.packets_received::total\s*/packets_received = /' >> network_stats.txt
+grep "average_packet_queueing_latency" m5out/stats.txt | sed 's/system.ruby.network.average_packet_queueing_latency\s*/average_packet_queueing_latency = /' >> network_stats.txt
+grep "average_packet_network_latency" m5out/stats.txt | sed 's/system.ruby.network.average_packet_network_latency\s*/average_packet_network_latency = /' >> network_stats.txt
+grep "average_packet_latency" m5out/stats.txt | sed 's/system.ruby.network.average_packet_latency\s*/average_packet_latency = /' >> network_stats.txt
+grep "average_hops" m5out/stats.txt | sed 's/system.ruby.network.average_hops\s*/average_hops = /' >> network_stats.txt
\ No newline at end of file
diff --git a/network_stats.txt b/network_stats.txt
new file mode 100755
index 0000000000..6b12787c57
--- /dev/null
+++ b/network_stats.txt
@@ -0,0 +1,7 @@
+
+packets_injected = 3165                       (Unspecified)
+packets_received = 3162                       (Unspecified)
+average_packet_queueing_latency = 2                       (Unspecified)
+average_packet_network_latency = 13.557559                       (Unspecified)
+average_packet_latency = 15.557559                       (Unspecified)
+average_hops = 5.269450                       (Unspecified)
-- 
2.43.0

